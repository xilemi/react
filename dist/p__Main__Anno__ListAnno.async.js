"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[761],{21015:function(Y,h,e){e.r(h);var T=e(97857),c=e.n(T),g=e(15009),o=e.n(g),j=e(99289),E=e.n(j),U=e(5574),C=e.n(U),f=e(67294),P=e(5966),B=e(64317),x=e(90672),y=e(638),K=e(24969),L=e(89705),W=e(1443),p=e(71577),Z=e(85418),F=e(45087),v=e(62367),$=e(15370),A=e(84851),O=e(32877),S=e(82188),a=e(85893),k=function(){var G=y.Z.useForm(),z=C()(G,1),q=z[0],D=(0,f.useRef)(),d=(0,f.useRef)(),H=(0,f.useState)(!0),b=C()(H,2),ee=b[0],J=b[1],N=O.Z.updataTypeAnno,R=O.Z.typeAnno,I=O.Z.info,ne=function(){var l=E()(o()().mark(function r(n){var u,t;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,v.iO)(n);case 2:u=s.sent,u.code==200&&((t=D.current)===null||t===void 0||t.reload());case 4:case"end":return s.stop()}},r)}));return function(n){return l.apply(this,arguments)}}(),V=function(r){var n,u,t;(n=d.current)===null||n===void 0||n.setOpen(!0),(u=d.current)===null||u===void 0||u.form.setFieldsValue(r),(t=d.current)===null||t===void 0||t.setId(r._id),J(!1)},Q=function(){var l=E()(o()().mark(function r(n){var u,t;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,v.y2)(c()(c()({},n),{},{_id:d.current.id}));case 2:u=s.sent,u.code==200&&((t=D.current)===null||t===void 0||t.reload());case 4:case"end":return s.stop()}},r)}));return function(n){return l.apply(this,arguments)}}(),X=[{title:"\u5E8F\u53F7",dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u516C\u544A\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,search:!0,tip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{disable:!0,title:"\u516C\u544A\u7B49\u7EA7",dataIndex:"type",search:!0},{disable:!0,title:"\u516C\u544A\u7C7B\u578B",dataIndex:"label",search:!1,render:function(r,n,u,t){var _;return(0,a.jsx)("span",{children:(_=R.find(function(s){return s.value==n.type}))===null||_===void 0?void 0:_.label})}},{disable:!0,title:"\u516C\u544A\u63CF\u8FF0",dataIndex:"desc",search:!1},{disable:!0,title:"\u516C\u544A\u5185\u5BB9",dataIndex:"content",search:!1,ellipsis:!0},{disable:!0,title:"\u4F5C\u8005",dataIndex:"author",search:!1,render:function(r,n,u,t){return(0,a.jsx)("span",{children:n.author.username})}},{disable:!0,dataIndex:"time",valueType:"dateRange",hideInTable:!0},{disable:!0,title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"time",valueType:"date",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",render:function(r,n,u,t){return[(0,a.jsx)(p.ZP,{disabled:!(I.role>6),onClick:function(){(0,$.AU)("\u662F\u5426\u5220\u9664",E()(o()().mark(function s(){var i,M;return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,v._7)({_id:n._id});case 2:i=m.sent,i.code==200&&((M=D.current)===null||M===void 0||M.reload());case 4:case"end":return m.stop()}},s)})))},children:"\u5220\u9664"},n._id),(0,a.jsx)(p.ZP,{disabled:!(I.role>6),onClick:function(){return V(n)},children:"\u4FEE\u6539"},n.type)]}}];return(0,f.useEffect)(function(){N()},[]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(F.Z,{ref:d,title:"\u4FEE\u6539\u516C\u544A",confirm:Q,children:[(0,a.jsx)(P.Z,{name:"title",label:"\u516C\u544A\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]}),(0,a.jsx)(P.Z,{name:"type",label:"\u516C\u544A\u7B49\u7EA7",rules:[{pattern:/\d/,message:"\u516C\u544A\u7B49\u7EA7\u53EA\u80FD\u662F\u6570\u5B57"},{required:!0,message:"\u8BF7\u586B\u5199"}],disabled:!0}),(0,a.jsx)(B.Z,{options:R,name:"type",label:"\u516C\u544A\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]}),(0,a.jsx)(P.Z,{name:"desc",label:"\u516C\u544A\u63CF\u8FF0",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]}),(0,a.jsx)(x.Z,{name:"content",label:"\u516C\u544A\u5185\u5BB9",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]})]}),(0,a.jsx)(W.Z,{columns:X,actionRef:D,cardBordered:!0,request:E()(o()().mark(function l(){var r,n,u,t,_=arguments;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=_.length>0&&_[0]!==void 0?_[0]:{},n=_.length>1?_[1]:void 0,u=_.length>2?_[2]:void 0,console.log(r),i.next=6,(0,v.jm)(c()(c()({},r),{},{sort:n.value=="ascend"?1:-1,time:JSON.stringify(r.time)}));case 6:if(t=i.sent,t.code!=200){i.next=9;break}return i.abrupt("return",{data:t.result});case 9:case"end":return i.stop()}},l)})),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange:function(r){}},rowKey:"_id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{},pagination:{pageSize:5},dateFormatter:"string",headerTitle:"\u9AD8\u7EA7\u8868\u683C",toolBarRender:function(){return[(0,a.jsx)(p.ZP,{icon:(0,a.jsx)(K.Z,{}),onClick:function(){S.m8.push("/main/anno/addanno")},type:"primary",children:"\u65B0\u5EFA"},"button"),(0,a.jsx)(Z.Z,{menu:{items:[{label:"1st item",key:"1"},{label:"2nd item",key:"2"},{label:"3rd item",key:"3"}]},children:(0,a.jsx)(p.ZP,{children:(0,a.jsx)(L.Z,{})})},"menu")]}})]})};h.default=(0,A.f3)("UserInfo")((0,A.Pi)(k))}}]);
